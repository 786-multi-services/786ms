{%extends 'base.html'%}

{% block body_head_title %}
	<h1 class="heading">Welcome {{user.get_full_name}}</h1>
	{% if user.is_authenticated and group in user.groups.all %}
		<form action="/student/signout/" method="POST">
			{% csrf_token %}
			<div class="form-group">
				<input type="submit" value="Logout" class="btn btn-danger">
			</div>
		</form>	
	{%endif%}
{% endblock %}

{%block body_block%}
	<div class="container">
		<div class="row section">
			<h4 class="heading">Token</h4>
			{% if token %}
				<div class="alert alert-success center">Token Number <b>{{token.token}}</b> generated for {{token.name}}.</div>
			{%endif%}
			<form action="." method="post">
				{%csrf_token%}
				{% for field in token_form.visible_fields%}
					<label>{{field.label}}</label>
					{{field}}
					<ul class="errorlist">
					{% for error in field.errors %}
						<li><i class="fa fa-asterisk"></i> {{error}}</li>
					{%endfor%}
					</ul>
				{%endfor%}
				<input type="submit" value="Generate Token" class="btn btn-default">
			</form>
		</div>
		<div class="row section">
			<h4 class="heading"> Student List</h4>
			
			<table class="table">
				<tr>
					<th class="center">Sr. No</th>
					<th class="center">Name</th>
					<th class="center">Token</th>
					<th class="center">Photo</th>
					<th class="center">Signature</th>
					<th class="center">Thumb</th>
				</tr>
				{%for student in students%}
				<tr>
					<td>{{forloop.counter}}</td>
					<td><a href="student/{{student.pk}}/">{{student.user.get_full_name}}</a></td>
					<td>{{student.token.token}}</td>
					<td><img src="{{student.photo.url}}" width="100"></td>
					<td><img src="{{student.signature.url}}" width="100"></td>
					<td><img src="{{student.left_thumb_impression.url}}" width="100"></td>
				</tr>
				{%endfor%}
			</table>
		</div>
	</div>
{%endblock%}
